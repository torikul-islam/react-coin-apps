{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Pc\\\\Downloads\\\\learn-react-by-building-an-app\\\\react-coin\\\\src\\\\components\\\\list\\\\list.js\";\nimport React from \"react\";\nimport { handleResponse } from \"../../helpers\";\nimport { API_URL } from \"../../config\";\nimport Loading from \"./loding\";\nimport Table from \"./Table\";\nimport Pagination from \"./Pagination\";\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List() {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this));\n    _this.state = {\n      loding: false,\n      currencies: [],\n      error: null,\n      totalPages: 0,\n      page: 1\n    };\n    _this.handlePaginationClick = _this.handlePaginationClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchCurriencies();\n    }\n  }, {\n    key: \"fetchCurriencies\",\n    value: function fetchCurriencies() {\n      var _this2 = this;\n\n      this.setState({\n        loding: true\n      });\n      var page = this.state.page;\n      fetch(\"\".concat(API_URL, \"/cryptocurrencies?page=\").concat(page, \"&perPage=10\")).then(handleResponse).then(function (data) {\n        var currencies = data.currencies,\n            totalPages = data.totalPages;\n\n        _this2.setState({\n          currencies: currencies,\n          totalPages: totalPages,\n          loding: false\n        });\n      }).catch(function (error) {\n        _this2.setState({\n          error: error.errorMessage,\n          loding: false\n        });\n      });\n    }\n  }, {\n    key: \"handlePaginationClick\",\n    value: function handlePaginationClick(direction) {\n      var _this3 = this;\n\n      var nextPage = this.state.page;\n      nextPage = direction === \"next\" ? nextPage + 1 : nextPage - 1;\n      this.setState({\n        page: nextPage\n      }, function () {\n        //call fetchCurriencies function inside setState's callback\n        //because we have to make sure first page state is updated\n        _this3.fetchCurriencies();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          loading = _this$state.loading,\n          error = _this$state.error,\n          currencies = _this$state.currencies,\n          page = _this$state.page,\n          totalPages = _this$state.totalPages;\n      if (this.state.loding) return React.createElement(\"div\", {\n        className: \"loading-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }));\n\n      if (this.state.error) {\n        return React.createElement(\"div\", {\n          className: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, error);\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Table, {\n        currencies: currencies,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(Pagination, {\n        page: page,\n        totalPages: totalPages,\n        handlePaginationClick: this.handlePaginationClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nexport default List;","map":{"version":3,"sources":["C:\\Users\\Pc\\Downloads\\learn-react-by-building-an-app\\react-coin\\src\\components\\list\\list.js"],"names":["React","handleResponse","API_URL","Loading","Table","Pagination","List","state","loding","currencies","error","totalPages","page","handlePaginationClick","bind","fetchCurriencies","setState","fetch","then","data","catch","errorMessage","direction","nextPage","loading","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { handleResponse } from \"../../helpers\";\r\nimport { API_URL } from \"../../config\";\r\nimport Loading from \"./loding\";\r\nimport Table from \"./Table\";\r\nimport Pagination from \"./Pagination\";\r\n\r\nclass List extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      loding: false,\r\n      currencies: [],\r\n      error: null,\r\n      totalPages: 0,\r\n      page: 1\r\n    };\r\n    this.handlePaginationClick = this.handlePaginationClick.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchCurriencies();\r\n  }\r\n\r\n  fetchCurriencies() {\r\n    this.setState({ loding: true });\r\n    const { page } = this.state;\r\n    fetch(`${API_URL}/cryptocurrencies?page=${page}&perPage=10`)\r\n      .then(handleResponse)\r\n      .then(data => {\r\n        const { currencies, totalPages } = data;\r\n        this.setState({\r\n          currencies: currencies,\r\n          totalPages: totalPages,\r\n          loding: false\r\n        });\r\n      })\r\n      .catch(error => {\r\n        this.setState({ error: error.errorMessage, loding: false });\r\n      });\r\n  }\r\n\r\n  handlePaginationClick(direction) {\r\n    let nextPage = this.state.page;\r\n\r\n    nextPage = direction === \"next\" ? nextPage + 1 : nextPage - 1;\r\n    this.setState({ page: nextPage }, () => {\r\n      //call fetchCurriencies function inside setState's callback\r\n      //because we have to make sure first page state is updated\r\n      this.fetchCurriencies();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, error, currencies, page, totalPages } = this.state;\r\n    if (this.state.loding)\r\n      return (\r\n        <div className=\"loading-container\">\r\n          <Loading />\r\n        </div>\r\n      );\r\n    if (this.state.error) {\r\n      return <div className=\"error\">{error}</div>;\r\n    }\r\n    return (\r\n      <div>\r\n        <Table currencies={currencies} />\r\n\r\n        <Pagination\r\n          page={page}\r\n          totalPages={totalPages}\r\n          handlePaginationClick={this.handlePaginationClick}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default List;\r\n"]},"metadata":{},"sourceType":"module"}